<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="363px" preserveAspectRatio="none" style="width:611px;height:363px;" version="1.1" viewBox="0 0 611 363" width="611px" zoomAndPan="magnify"><defs><filter height="300%" id="fm5h63xwq7tfv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class FlyweightFactory--><rect fill="#FEFECE" filter="url(#fm5h63xwq7tfv)" height="60.9551" id="FlyweightFactory" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="156" y="170.5"/><ellipse cx="193.5" cy="186.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M196.4731,192.1431 Q195.8921,192.4419 195.2529,192.5913 Q194.6138,192.7407 193.9082,192.7407 Q191.4014,192.7407 190.0815,191.0889 Q188.7617,189.437 188.7617,186.3159 Q188.7617,183.1865 190.0815,181.5347 Q191.4014,179.8828 193.9082,179.8828 Q194.6138,179.8828 195.2612,180.0322 Q195.9087,180.1816 196.4731,180.4805 L196.4731,183.2031 Q195.8423,182.6221 195.2488,182.3523 Q194.6553,182.0825 194.0244,182.0825 Q192.6797,182.0825 191.9949,183.1492 Q191.3101,184.2158 191.3101,186.3159 Q191.3101,188.4077 191.9949,189.4744 Q192.6797,190.541 194.0244,190.541 Q194.6553,190.541 195.2488,190.2712 Q195.8423,190.0015 196.4731,189.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="212.5" y="191.0352">FlyweightFactory</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="157" x2="330" y1="202.5" y2="202.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="157" x2="330" y1="210.5" y2="210.5"/><ellipse cx="167" cy="222.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="176" y="225.1348">getFlyweight(key): Flyweight</text><polygon fill="#FBFB77" filter="url(#fm5h63xwq7tfv)" points="106,8,106,109.8633,381,109.8633,381,18,371,8,106,8" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="106,8,106,109.8633,381,109.8633,381,62.9316,160,220.9775,381,54.9316,381,18,371,8,106,8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="371" x2="371" y1="8" y2="18"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="371" y1="18" y2="18"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="112" y="25.5684">if (flyweights.contains(key))</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="144" y="40.8789">return flyweights.get(key);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="116" y="56.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="112" y="71.5">Flyweight fw = new ConcreteFlyweight();</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="112" y="86.8105">flyweights.put(key, fw);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="112" y="102.1211">return fw;</text><!--class Flyweight--><rect fill="#FEFECE" filter="url(#fm5h63xwq7tfv)" height="60.9551" id="Flyweight" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="441" y="167.5"/><ellipse cx="490.25" cy="183.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M486.1777,179.2651 L486.1777,177.1069 L493.5571,177.1069 L493.5571,179.2651 L491.0918,179.2651 L491.0918,187.3418 L493.5571,187.3418 L493.5571,189.5 L486.1777,189.5 L486.1777,187.3418 L488.6431,187.3418 L488.6431,179.2651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="52" x="510.75" y="188.0352">Flyweight</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="442" x2="599" y1="199.5" y2="199.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="442" x2="599" y1="207.5" y2="207.5"/><ellipse cx="452" cy="219.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="461" y="222.1348">operation(extrinsicState)</text><!--class ConcreteFlyweight--><rect fill="#FEFECE" filter="url(#fm5h63xwq7tfv)" height="73.9102" id="ConcreteFlyweight" style="stroke: #A80036; stroke-width: 1.5;" width="159" x="441" y="279"/><ellipse cx="466.8" cy="295" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M469.7731,300.6431 Q469.1921,300.9419 468.5529,301.0913 Q467.9138,301.2407 467.2082,301.2407 Q464.7014,301.2407 463.3815,299.5889 Q462.0617,297.937 462.0617,294.8159 Q462.0617,291.6865 463.3815,290.0347 Q464.7014,288.3828 467.2082,288.3828 Q467.9138,288.3828 468.5612,288.5322 Q469.2087,288.6816 469.7731,288.9805 L469.7731,291.7031 Q469.1423,291.1221 468.5488,290.8523 Q467.9553,290.5825 467.3244,290.5825 Q465.9797,290.5825 465.2949,291.6492 Q464.6101,292.7158 464.6101,294.8159 Q464.6101,296.9077 465.2949,297.9744 Q465.9797,299.041 467.3244,299.041 Q467.9553,299.041 468.5488,298.7712 Q469.1423,298.5015 469.7731,297.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="483.2" y="299.5352">ConcreteFlyweight</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="442" x2="599" y1="311" y2="311"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="449" y="319.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="461" y="325.6348">intrinsicState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="442" x2="599" y1="331.9551" y2="331.9551"/><ellipse cx="452" cy="343.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="461" y="346.5898">operation(extrinsicState)</text><!--entity Client--><ellipse cx="26" cy="226.5" fill="#FEFECE" filter="url(#fm5h63xwq7tfv)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,234.5 L26,261.5 M13,242.5 L39,242.5 M26,261.5 L13,276.5 M26,261.5 L39,276.5 " fill="#FEFECE" filter="url(#fm5h63xwq7tfv)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="6" y="297.0352">Client</text><!--link FlyweightFactory$$$BOTTOM to FlyweightFactory--><!--link FlyweightFactory to Flyweight--><path d="M344.1445,199.5 C344.1445,199.5 427.9374,199.5 427.9374,199.5 " fill="none" id="FlyweightFactory-Flyweight" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="440.9374,199.5,431.9374,195.5,435.9374,199.5,431.9374,203.5,440.9374,199.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435.9374" x2="427.9374" y1="199.5" y2="199.5"/><polygon fill="#FFFFFF" points="331.1445,199.5,337.1445,203.5,343.1445,199.5,337.1445,195.5,331.1445,199.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Flyweight to ConcreteFlyweight--><path d="M521,248.6951 C521,248.6951 521,278.7248 521,278.7248 " fill="none" id="Flyweight-ConcreteFlyweight" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="514.0001,248.6951,521,228.6951,528.0001,248.695,514.0001,248.6951" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Client to FlyweightFactory--><path d="M46.072,224 C46.072,224 150.8963,224 150.8963,224 " fill="none" id="Client-FlyweightFactory" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="155.8963,224,146.8963,220,150.8963,224,146.8963,228,155.8963,224" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Client to ConcreteFlyweight--><path d="M46.3069,289.25 C46.3069,289.25 435.6406,289.25 435.6406,289.25 " fill="none" id="Client-ConcreteFlyweight" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="440.6406,289.25,431.6406,285.25,435.6406,289.25,431.6406,293.25,440.6406,289.25" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
allow_mixing
skinparam linetype ortho
left to right direction
skinparam nodesep 50


class FlyweightFactory {
	+ getFlyweight(key): Flyweight
}

note right of FlyweightFactory::getFlyweight
	if (flyweights.contains(key))
		return flyweights.get(key);

	Flyweight fw = new ConcreteFlyweight();
	flyweights.put(key, fw);
	return fw;
end note

interface Flyweight {
	+ operation(extrinsicState)
}

FlyweightFactory o- -> Flyweight


class ConcreteFlyweight {
	- intrinsicState
	+ operation(extrinsicState)
}

ConcreteFlyweight -..left-|> Flyweight

actor Client

Client - -> FlyweightFactory
Client - -> ConcreteFlyweight

@enduml

PlantUML version 1.2017.16(Sun Sep 03 12:53:37 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_144-b01
Operating System: Mac OS X
OS Version: 10.13.1
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>