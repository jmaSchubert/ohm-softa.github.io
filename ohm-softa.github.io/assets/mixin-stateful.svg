<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="386px" preserveAspectRatio="none" style="width:462px;height:386px;" version="1.1" viewBox="0 0 462 386" width="462px" zoomAndPan="magnify"><defs><filter height="300%" id="f1u26gnsr2yzkd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Stateful--><rect fill="#FEFECE" filter="url(#f1u26gnsr2yzkd)" height="73.9102" id="Stateful" style="stroke: #A80036; stroke-width: 1.5;" width="222" x="139" y="8"/><ellipse cx="224.75" cy="24" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M221.1777,20.2651 L221.1777,18.1069 L228.5571,18.1069 L228.5571,20.2651 L226.0918,20.2651 L226.0918,28.3418 L228.5571,28.3418 L228.5571,30.5 L221.1777,30.5 L221.1777,28.3418 L223.6431,28.3418 L223.6431,20.2651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="42" x="245.25" y="28.5352">Stateful</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="140" x2="360" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="140" x2="360" y1="48" y2="48"/><ellipse cx="150" cy="59.9775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="159" y="62.6348">&lt;T&gt; getState(Class clazz, T initial): T</text><ellipse cx="150" cy="72.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="159" y="75.5898">&lt;T&gt; setState(Class clazz, T state)</text><!--class StatefulObject--><rect fill="#FEFECE" filter="url(#f1u26gnsr2yzkd)" height="86.8652" id="StatefulObject" style="stroke: #A80036; stroke-width: 1.5;" width="248" x="6" y="142"/><ellipse cx="85.75" cy="158" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M88.2231,164.1431 Q87.6421,164.4419 87.0029,164.5913 Q86.3638,164.7407 85.6582,164.7407 Q83.1514,164.7407 81.8315,163.0889 Q80.5117,161.437 80.5117,158.3159 Q80.5117,155.1865 81.8315,153.5347 Q83.1514,151.8828 85.6582,151.8828 Q86.3638,151.8828 87.0112,152.0322 Q87.6587,152.1816 88.2231,152.4805 L88.2231,155.2031 Q87.5923,154.6221 86.9988,154.3523 Q86.4053,154.0825 85.7744,154.0825 Q84.4297,154.0825 83.7449,155.1492 Q83.0601,156.2158 83.0601,158.3159 Q83.0601,160.4077 83.7449,161.4744 Q84.4297,162.541 85.7744,162.541 Q86.4053,162.541 86.9988,162.2712 Q87.5923,162.0015 88.2231,161.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="80" x="106.25" y="162.5352">StatefulObject</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="253" y1="174" y2="174"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="182.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="26" y="188.6348">states: HashMap&lt;Class, Object&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="253" y1="194.9551" y2="194.9551"/><ellipse cx="17" cy="206.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="222" x="26" y="209.5898">final &lt;T&gt; getState(Class clazz, T initial): T</text><ellipse cx="17" cy="219.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="26" y="222.5449">final &lt;T&gt; setState(Class clazz, T s)</text><!--class Escalatable--><rect fill="#FEFECE" filter="url(#f1u26gnsr2yzkd)" height="73.9102" id="Escalatable" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="289" y="148.5"/><ellipse cx="333.25" cy="164.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M329.6777,160.7651 L329.6777,158.6069 L337.0571,158.6069 L337.0571,160.7651 L334.5918,160.7651 L334.5918,168.8418 L337.0571,168.8418 L337.0571,171 L329.6777,171 L329.6777,168.8418 L332.1431,168.8418 L332.1431,160.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="353.75" y="169.0352">Escalatable</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="290" x2="450" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="290" x2="450" y1="188.5" y2="188.5"/><ellipse cx="300" cy="200.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="309" y="203.1348">text(): String</text><ellipse cx="300" cy="213.4326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="309" y="216.0898">default escalated(): String</text><!--class StatefulMessage--><rect fill="#FEFECE" filter="url(#f1u26gnsr2yzkd)" height="86.8652" id="StatefulMessage" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="167.5" y="289"/><ellipse cx="200.95" cy="305" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M203.4231,311.1431 Q202.8421,311.4419 202.2029,311.5913 Q201.5638,311.7407 200.8582,311.7407 Q198.3514,311.7407 197.0315,310.0889 Q195.7117,308.437 195.7117,305.3159 Q195.7117,302.1865 197.0315,300.5347 Q198.3514,298.8828 200.8582,298.8828 Q201.5638,298.8828 202.2112,299.0322 Q202.8587,299.1816 203.4231,299.4805 L203.4231,302.2031 Q202.7923,301.6221 202.1988,301.3523 Q201.6053,301.0825 200.9744,301.0825 Q199.6297,301.0825 198.9449,302.1492 Q198.2601,303.2158 198.2601,305.3159 Q198.2601,307.4077 198.9449,308.4744 Q199.6297,309.541 200.9744,309.541 Q201.6053,309.541 202.1988,309.2712 Q202.7923,309.0015 203.4231,308.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="219.05" y="309.5352">StatefulMessage</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="168.5" x2="331.5" y1="321" y2="321"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="175.5" y="329.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="187.5" y="335.6348">m: String</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="168.5" x2="331.5" y1="341.9551" y2="341.9551"/><ellipse cx="178.5" cy="353.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="187.5" y="356.5898">StatefulMessage(String m)</text><ellipse cx="178.5" cy="366.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="187.5" y="369.5449">text(): String</text><!--link Stateful to StatefulObject--><path d="M205.1214,97.5453 C192.6697,112.1242 179.2885,127.7914 167.3193,141.8053 " fill="none" id="Stateful-StatefulObject" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="199.8453,92.9444,218.1573,82.2825,210.491,102.0368,199.8453,92.9444" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Stateful to Escalatable--><path d="M294.8344,97.4937 C309.1823,114.2926 324.7684,132.5413 338.0085,148.0432 " fill="none" id="Stateful-Escalatable" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="289.509,102.0368,281.8427,82.2825,300.1547,92.9444,289.509,102.0368" style="stroke: #A80036; stroke-width: 1.0;"/><!--link StatefulObject to StatefulMessage--><path d="M178.4044,244.7954 C190.4556,259.5581 203.1556,275.1156 214.4584,288.9616 " fill="none" id="StatefulObject-StatefulMessage" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="172.904,249.1267,165.6791,229.2068,183.7493,240.2734,172.904,249.1267" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Escalatable to StatefulMessage--><path d="M326.953,238.2326 C313.3964,254.8394 298.5819,272.9872 285.603,288.8863 " fill="none" id="Escalatable-StatefulMessage" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="321.6487,233.6609,339.7189,222.5943,332.494,242.5142,321.6487,233.6609" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

interface Stateful {
	+ <T> getState(Class clazz, T initial): T
	+ <T> setState(Class clazz, T state)
}

class StatefulObject implements Stateful {
	- states: HashMap<Class, Object>
	+ final <T> getState(Class clazz, T initial): T
	+ final <T> setState(Class clazz, T s)
}

interface Escalatable extends Stateful {
	+ text(): String
	+ default escalated(): String
}

class StatefulMessage extends StatefulObject implements Escalatable {
	- m: String
	+ StatefulMessage(String m)
	+ text(): String
}


@enduml

PlantUML version 1.2018.07(Mon Jun 11 19:29:06 CEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_144-b01
Operating System: Mac OS X
OS Version: 10.14.1
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>